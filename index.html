<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Automated Quality Control</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body { background: #f4f6f9; font-family: Arial, sans-serif; }
        .container { margin-top: 50px; }
        .upload-box { border: 2px dashed #6c757d; padding: 40px; border-radius: 15px; text-align: center; background: white; }
        .upload-box:hover { border-color: #007bff; }
        .btn-upload { margin-top: 15px; }
        .result-card { margin-top: 30px; }
        #previewImg {
            transition: box-shadow 0.3s;
            box-shadow: 0 4px 16px rgba(0,0,0,0.12);
        }
        #previewContainer {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
<div class="container">
    <h2 class="text-center mb-4">üì∏ Automated Quality Control System</h2>

    <form method="POST" enctype="multipart/form-data" class="text-center" id="uploadForm">
        <div class="upload-box">
            <input type="file" name="image" id="imageInput" accept="image/*" class="form-control mb-3" required onchange="previewImage(event)">
            <div id="previewContainer" style="display:none;">
                <img id="previewImg" src="#" alt="Image Preview" class="img-thumbnail mb-3" style="max-width: 300px; max-height: 300px; border: 2px solid #007bff; border-radius: 10px;">
            </div>
            <button type="submit" class="btn btn-primary btn-upload">Check Quality</button>
        </div>
    </form>

    {% if image_url %}
    <div class="text-center mt-4">
        <h5>üñºÔ∏è Uploaded Image</h5>
        <img src="{{ image_url }}" alt="Uploaded Image" class="img-thumbnail mb-3" style="max-width: 300px; max-height: 300px; border: 2px solid #007bff; border-radius: 10px;">
    </div>
    {% endif %}

    {% if prediction %}
    <div class="result-card card shadow p-4">
        <h4 class="mb-3">üîé Prediction Results</h4>
        <ul class="list-group">
            <li class="list-group-item"><b>CNN:</b> {{ prediction["CNN"] }}</li>
        </ul>
    </div>
    {% endif %}
</div>
<script>
function previewImage(event) {
    var input = event.target;
    var previewContainer = document.getElementById('previewContainer');
    var previewImg = document.getElementById('previewImg');
    if (input.files && input.files[0]) {
        var reader = new FileReader();
        reader.onload = function(e) {
            previewImg.src = e.target.result;
            previewContainer.style.display = 'block';
        }
        reader.readAsDataURL(input.files[0]);
    } else {
        previewContainer.style.display = 'none';
        previewImg.src = '#';
    }
}
</script>
</body>
</html>
